{# templates/view.html #}
{% extends "base.html" %}

{% block content %}
<!-- Define a JS constant for your â€œdefaultâ€ cuisine image -->
<script>
  const DEFAULT_CUISINE_IMG = "{{ url_for('static', filename='images/cuisines/default.jpg') }}";
</script>

<div class="container my-5">
  <div class="card shadow-sm">
    {# normalize the cuisine tag to a filename: lowercase & hyphens #}
    {% set img_name = recipe.cuisine|lower|replace(' ', '-') ~ '.jpg' %}

    <img
      src="{{ url_for('static', filename='images/cuisines/' ~ img_name) }}"
      class="card-img-top"
      alt="{{ recipe.cuisine|title }}"
      onerror="this.onerror=null; this.src=DEFAULT_CUISINE_IMG;"
    >

    <div class="card-body">
      <h2 class="card-title">{{ recipe.name }}</h2>
      <p class="text-muted">{{ recipe.description }}</p>

      <ul class="list-inline mb-3">
        <li class="list-inline-item"><strong>â±</strong> {{ recipe.minutes }} min</li>
        <li class="list-inline-item"><strong>ğŸ”¥</strong> {{ recipe.nutrition.calories }} cal</li>
        {% for key, val in recipe.nutrition.items() if key != 'calories' %}
          <li class="list-inline-item">
            <strong>{{ key.replace('_',' ').title() }}:</strong> {{ val }}
          </li>
        {% endfor %}
      </ul>

      <h5>ğŸ¥— Ingredients</h5>
      <ul>
        {% for ing in recipe.ingredients %}
          <li>{{ ing }}</li>
        {% endfor %}
      </ul>

      <h5 class="mt-4">ğŸ‘©â€ğŸ³ Steps</h5>
      <ol>
        {% for step in recipe.steps %}
          <li>{{ step }}</li>
        {% endfor %}
      </ol>

      <a href="{{ request.referrer or url_for('main') }}" class="btn btn-outline-secondary mt-4">
        â† Back
      </a>
    </div>
  </div>
</div>
{% endblock %}
